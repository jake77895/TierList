<div class="container mt-4">
  <div class="row">
    <!-- Left Column: 2/3 Width -->
    <div class="col-lg-8 col-md-8">
      <div class="content-left border p-3">
        <!-- Content for the tier list will go here -->

        <%= render 'tier_list_rank' %>
      </div>
    </div>

    <!-- Right Column: 1/3 Width -->
    <div class="col-lg-4 col-md-4">
      <div class="content-right border p-3">
        <h2 class="text-center">Right Column (1/3 Width)</h2>

        <div id="item-card" class="card bg-light text-dark position-relative mb-3" style="overflow: hidden;">
          <img src="<%= asset_path('egg.png') %>" class="card-img" alt="Tier List Item">
          <div class="position-absolute" style="background: rgba(0, 0, 0, 0.6); color: white; height: auto; width: 90%; bottom: 15px; left: 5%; padding: 10px; border-radius: 0px; border-left: 5px solid var(--bs-primary);">
            <h5 id="item-title" class="card-title mb-1" style="font-size: 1.2rem; margin-bottom: 0;"><%= @items.first&.name || "No items available" %></h5>
            <p id="item-description" class="card-text" style="font-size: 0.9rem;"><%= @items.first&.description || "No item description available" %></p>
          </div>
        </div>

        <div class="d-flex justify-content-between mt-3">
          <button id="prev-item" class="btn btn-secondary" disabled>Previous</button>
          <button id="next-item" class="btn btn-secondary">Next</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const items = <%= raw @items.to_json %>; // Serialize items into JavaScript
    let currentIndex = 0;

    const titleElement = document.getElementById('item-title');
    const descriptionElement = document.getElementById('item-description');
    const prevButton = document.getElementById('prev-item');
    const nextButton = document.getElementById('next-item');

    // Update the card content
    function updateCard() {
      const currentItem = items[currentIndex];
      titleElement.textContent = currentItem.name;
      descriptionElement.textContent = currentItem.description || ""; // Update the description

      // Enable/disable buttons
      prevButton.disabled = currentIndex === 0;
      nextButton.disabled = currentIndex === items.length - 1;
    }

    // Event listeners for navigation
    prevButton.addEventListener('click', function () {
      if (currentIndex > 0) {
        currentIndex--;
        updateCard();
      }
    });

    nextButton.addEventListener('click', function () {
      if (currentIndex < items.length - 1) {
        currentIndex++;
        updateCard();
      }
    });

    updateCard(); // Initialize the card
  });
</script>
